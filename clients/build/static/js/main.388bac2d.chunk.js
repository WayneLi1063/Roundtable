(this.webpackJsonproundtable=this.webpackJsonproundtable||[]).push([[0],{304:function(e,t,a){e.exports=a(590)},588:function(e,t,a){},590:function(e,t,a){"use strict";a.r(t);var s=a(1),r=a.n(s),o=a(276),n=a.n(o),l=a(12),i=a(13);class c extends r.a.Component{constructor(e){super(e),this.toggleMenu=()=>{this.setState(e=>({display:!e.display}))},this.handleHomePageClick=()=>{this.setState({shouldRedirect:"home"})},this.handleMyGroupClick=()=>{this.setState({shouldRedirect:"mygroup"})},this.state={profileChange:this.props.profileChange,profileURL:"",display:!1,page:this.props.page}}componentDidUpdate(e){this.props.profileChange!==e.profileChange&&this.props.user&&this.setState(()=>({profileChange:this.props.profileChange,profileURL:this.props.user.profileChange})),this.props.user!==e.user&&this.props.user&&this.setState(()=>({profileURL:this.props.user.profileChange}))}checkStyle(){return!0===this.state.display?{display:"block"}:{display:"none"}}render(){if(""!==this.state.page)return"home"===this.state.page?(this.props.togglePage(""),r.a.createElement(l.a,{to:"/home"})):(this.props.togglePage(""),r.a.createElement(l.a,{to:"/mygroup"}));let e="";return null!==this.props.user&&(e=this.props.user.photoURL),r.a.createElement("div",{id:"nav-search",className:"sticky-top"},r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"logo row",onClick:this.handleHomePageClick},r.a.createElement(i.b,{to:"/home"},r.a.createElement("img",{id:"logo",src:"/img/logo.png",alt:"Logo","aria-label":"Return to main page."})),r.a.createElement(i.b,{to:"/home"},r.a.createElement("p",{className:"h2",id:"logo-text"},"Round Table"))),r.a.createElement("div",{className:"nav-search"},r.a.createElement("div",{className:"profile-setting"},r.a.createElement("div",{className:"nav-links"},r.a.createElement(i.b,{to:"/home",className:"text-uppercase font-weight-bold",onClick:this.handleHomePageClick},"Homepage"),r.a.createElement(i.b,{to:"/mygroup",className:"text-uppercase font-weight-bold",onClick:this.handleMyGroupClick},"MyGroups"),r.a.createElement(i.b,{to:"/myprofile",className:"text-uppercase font-weight-bold"},"Profile"),r.a.createElement(i.b,{to:"/",className:"text-uppercase font-weight-bold",onClick:()=>this.props.setAuthToken(null)},"Sign out"),r.a.createElement(i.b,{to:"/myprofile"},r.a.createElement("img",{className:"avatar",src:this.props.userPhoto,alt:"User Profile"}))),r.a.createElement("div",{className:"dropdown-mobile",onClick:this.toggleMenu},r.a.createElement(i.b,{to:"#",className:"dropdown-toggle profile-link",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("img",{className:"avatar",src:e,alt:"User Profile"})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenuLink",style:this.checkStyle()},r.a.createElement(i.b,{to:"/home",onClick:this.handleHomePageClick,className:"dropdown-item"},"Homepage"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(i.b,{to:"/mygroup",className:"dropdown-item",onClick:this.handleMyGroupClick},"MyGroups"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(i.b,{to:"/myprofile",className:"dropdown-item"},"Profile"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(i.b,{to:"/",className:"dropdown-item signout",onClick:()=>this.props.setAuthToken(null)},"Sign out"))))))))}}var m=a(18),h=a(19),p=a(21),u=a(20),d=a(22),g=a(45),f=a(278),b=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement("footer",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row d-flex text-center justify-content-center github"},r.a.createElement("a",{href:"https://github.com/WayneLi1063/Roundtable","aria-label":"Get source code of this site from Github!"},r.a.createElement(g.a,{icon:f.a,size:"lg",className:"white mt-1"})))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row d-flex text-center justify-content-center"},r.a.createElement("div",{className:"col-md-8 col-12 mt-4 mb-2"},r.a.createElement("p",{className:"footer-text"},"This web app is designed to help college students who would like to create or join study groups based on their currently taking courses and study goals.")))),r.a.createElement("hr",{className:"rgba-light"}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex text-center justify-content-center"},r.a.createElement("div",{className:"font-small"},r.a.createElement("p",null,"\xa9 2021 Wanye Li, Andi Ren, Aryan Varshney, Coco Li. All rights reserved.")))))))}}]),t}(r.a.Component);const E=a(181).CognitoIdentityClient,y=a(591).fromCognitoIdentityPool,k=a(589),N=k.S3Client,C=k.PutObjectCommand,v=k.ListObjectsCommand,w="roundtablefinder",S="us-west-1",D=new N({region:S,credentials:y({client:new E({region:S}),identityPoolId:"us-west-1:28fdba59-1304-427e-8879-19f3d8c15844"})}),x=async(e,t,a,s)=>{const r=encodeURIComponent(e)+"/";await D.send(new v({Prefix:r,Bucket:w}));const o=t.name;let n="";const l={Bucket:w,Key:n=""===a?r+o:r+a,Body:t};try{await D.send(new C(l)),console.log("Successfully uploaded photo."),"function"===typeof s&&s()}catch(i){console.error("There was an error uploading your photo: ",i.message)}};class P extends r.a.Component{constructor(e){super(e),this.toggleEmpty=()=>{this.setState(e=>({emptyAlertDisplay:!e.emptyAlertDisplay}))},this.toggleExceed=()=>{this.setState(e=>({exceedCharDisplay:!e.exceedCharDisplay}))},this.toggleEmptyCourse=()=>{this.setState(e=>({emptyCourseDisplay:!e.emptyCourseDisplay}))},this.handleImgURLChange=e=>{let t=e.target.files[0];this.setState({img:t})},this.handleGroupNameChange=e=>{this.state.emptyAlertDisplay&&this.toggleEmpty(),this.state.exceedCharDisplay&&this.toggleExceed();let t=e.target.value;this.setState({groupName:t})},this.handleCourseNameChange=e=>{let t=e.target.value;this.setState({courseName:t})},this.handleDescriptionChange=e=>{let t=e.target.value;this.setState({description:t})},this.handleMeetChange=e=>{let t=e.target.value;this.setState({when2meetURL:t})},this.handlePrivateChange=e=>{this.setState(e=>({private:!e.private}))},this.handleHomeworkHelpChange=()=>{this.setState(e=>({homeworkHelp:!e.homeworkHelp}))},this.handleExamSquadChange=()=>{this.setState(e=>({examSquad:!e.examSquad}))},this.handleNoteExchangeChange=()=>{this.setState(e=>({noteExchange:!e.noteExchange}))},this.handleLabMatesChange=()=>{this.setState(e=>({labMates:!e.labMates}))},this.handleProjectPartnersChange=()=>{this.setState(e=>({projectPartners:!e.projectPartners}))},this.handleGroupSizeChange=e=>{let t=e.target.value;this.setState({groupSize:t})},this.handleGroupSizeOutput=e=>{e.target.value=this.state.groupSize},this.handleSubmit=()=>{let e={};if(0===this.state.groupName.length)this.toggleEmpty();else if(this.state.groupName.length>24)this.toggleExceed();else if("Please set up your current courses in profile page."===this.state.myCourses[0])this.toggleEmptyCourse();else{if(""===this.state.img){let t="https://s3-us-west-2.amazonaws.com/uw-s3-cdn/wp-content/uploads/sites/81/2015/04/07090900/uw-block-w-statue-377x160.jpg";this.handleSubmitHelper(e,t)}else{x("GroupPhotos",this.state.img,this.state.img.name);let t="https://".concat(w,".s3.").concat(S,".amazonaws.com/GroupPhotos/").concat(this.state.img.name);this.handleSubmitHelper(e,t)}this.props.toggleForm()}},this.state={img:"",groupName:"",description:"",courseName:"",when2meetURL:"",groupSize:2,emptyAlertDisplay:!1,emptyCourseDisplay:!1,exceedCharDisplay:!1,homeworkHelp:!1,examSquad:!1,noteExchange:!1,labMates:!1,projectPartners:!1,private:!1,myCourses:[]}}componentDidUpdate(e){this.props.courseList!==e.courseList&&this.setState(()=>({myCourses:this.props.courseList,courseName:this.props.courseList[0]}))}handleSubmitHelper(e,t){e.teamName=this.state.groupName,e.className=this.state.courseName,e.totalNumber=parseInt(this.state.groupSize,10),e.img=t,e.homeworkHelp=this.state.homeworkHelp,e.examSquad=this.state.examSquad,e.noteExchange=this.state.noteExchange,e.labMates=this.state.labMates,e.projectPartners=this.state.projectPartners,e.description=this.state.description,e.private=this.state.private,e.when2meetURL=this.state.when2meetURL,this.props.onSubmit(e),this.props.feedbackDisplay?(this.props.toggleFeedback(),this.props.feedbackInfo.pop(),this.props.feedbackInfo.pop(),this.props.feedbackInfo.push("created"),this.props.feedbackInfo.push(this.state.groupName),this.props.toggleFeedback()):(this.props.feedbackInfo.push("created"),this.props.feedbackInfo.push(this.state.groupName),this.props.toggleFeedback()),this.setState({img:"",groupName:""})}render(){let e=this.state.myCourses.map(e=>r.a.createElement("option",{value:e,key:e},e));return r.a.createElement("div",null,this.props.createDisplay&&r.a.createElement("div",{className:"form-popup",id:"create-form"},r.a.createElement("form",{className:"form-container"},r.a.createElement("h1",null,"Create Group"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"create-new-image",className:"font-weight-bold"},"Upload New Image"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",id:"create-new-image",onChange:this.handleImgURLChange,accept:"image/*"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"create-group-name",className:"font-weight-bold"},"Group Name"),r.a.createElement("input",{type:"text",className:"form-control",id:"create-group-name",value:this.state.groupName,onChange:this.handleGroupNameChange}),this.state.emptyAlertDisplay&&r.a.createElement("p",{className:"alert-red alert-create empty-field"},"This field cannot be empty."),this.state.exceedCharDisplay&&r.a.createElement("p",{className:"alert-red alert-create 24-char"},"This field cannot exceed 24 characters.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-group course-container",id:"courseList-create"},r.a.createElement("label",{htmlFor:"create-course-name",className:"font-weight-bold"},"Course Name"),r.a.createElement("select",{className:"form-control select-field",id:"create-course-name",onChange:this.handleCourseNameChange},e),this.state.emptyCourseDisplay&&r.a.createElement("p",{className:"alert-red alert-create empty-course"},"Empty current courses or connection error, please set up your courses in profile page, or refresh webpage."))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"create-group-descr",className:"font-weight-bold"},"Group Description"),r.a.createElement("input",{type:"text",className:"form-control",id:"create-group-descr",value:this.state.description,onChange:this.handleDescriptionChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"create-meet",className:"font-weight-bold"},"When2meet URL"),r.a.createElement("input",{type:"text",className:"form-control",id:"create-meet",value:this.state.when2meetURL,onChange:this.handleMeetChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"create-group-size",className:"font-weight-bold"},"Group Size (2-5)"),r.a.createElement("br",null),r.a.createElement("input",{type:"range",name:"create-group-size",max:"5",min:"2",id:"create-group-size",className:"g-size",value:this.state.groupSize,onChange:this.handleGroupSizeChange}),r.a.createElement("output",{className:"ml-3",name:"create-size-output",id:"create-size-output"},this.state.groupSize)),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"create-form-group","aria-labelledby":"goal-text"},r.a.createElement("p",{className:"form-check-label font-weight-bold",id:"goal-text"},"Group Goal"),r.a.createElement("div",{className:"form-check"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"create-goal-1",onClick:this.handleHomeworkHelpChange}),r.a.createElement("label",{className:"form-check-label",htmlFor:"create-goal-1"},"Homework Help")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"create-goal-2",onClick:this.handleExamSquadChange}),r.a.createElement("label",{className:"form-check-label",htmlFor:"create-goal-2"},"Exam Squad")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"create-goal-3",onClick:this.handleNoteExchangeChange}),r.a.createElement("label",{className:"form-check-label",htmlFor:"create-goal-3"},"Note Exchange")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"create-goal-4",onClick:this.handleLabMatesChange}),r.a.createElement("label",{className:"form-check-label",htmlFor:"create-goal-4"},"Lab Mates")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"create-goal-5",onClick:this.handleProjectPartnersChange}),r.a.createElement("label",{className:"form-check-label",htmlFor:"create-goal-5"},"Project Partners")))))),r.a.createElement("div",{className:"form-button"},r.a.createElement("button",{type:"button",id:"submit-create",className:"btn save",onClick:this.handleSubmit},"Save"),r.a.createElement("button",{type:"button",id:"cancel-create",className:"btn cancel",onClick:this.props.toggleForm},"Cancel")))))}}class F extends r.a.Component{constructor(e){super(e),this.toggleEmpty=()=>{this.setState(e=>({emptyAlertDisplay:!e.emptyAlertDisplay}))},this.toggleExceed=()=>{this.setState(e=>({exceedCharDisplay:!e.exceedCharDisplay}))},this.toggleManyMember=()=>{this.setState(e=>({manyMemberDisplay:!e.manyMemberDisplay}))},this.handleImgURLChange=e=>{let t=e.target.files[0];this.setState({img:t})},this.handleGroupNameChange=e=>{this.state.emptyAlertDisplay&&this.toggleEmpty(),this.state.exceedCharDisplay&&this.toggleExceed();let t=e.target.value;this.setState({groupName:t})},this.handleCourseNameChange=e=>{let t=e.target.value;this.setState({courseName:t})},this.handleGroupSizeChange=e=>{let t=e.target.value;this.setState({groupSize:t})},this.handleDescriptionChange=e=>{let t=e.target.value;this.setState({description:t})},this.handleMeetChange=e=>{let t=e.target.value;this.setState({when2meetURL:t})},this.handlePrivateChange=e=>{this.setState(e=>({private:!e.private}))},this.handleHomeworkHelpChange=()=>{this.setState(e=>({homeworkHelp:!e.homeworkHelp}))},this.handleExamSquadChange=()=>{this.setState(e=>({examSquad:!e.examSquad}))},this.handleNoteExchangeChange=()=>{this.setState(e=>({noteExchange:!e.noteExchange}))},this.handleLabMatesChange=()=>{this.setState(e=>({labMates:!e.labMates}))},this.handleProjectPartnersChange=()=>{this.setState(e=>({projectPartners:!e.projectPartners}))},this.handleGroupSizeOutput=e=>{e.target.value=this.state.groupSize},this.handleSubmit=()=>{let e={};if(0===this.state.groupName.length)this.toggleEmpty();else if(this.state.groupName.length>24)this.toggleExceed();else if(this.state.groupSize<this.props.editData.members.length)this.toggleManyMember();else{if("string"!==typeof this.state.img){x("GroupPhotos",this.state.img,this.state.img.name);let t="https://".concat(w,".s3.").concat(S,".amazonaws.com/GroupPhotos/").concat(this.state.img.name);this.handleSubmitHelper(e,t)}else this.handleSubmitHelper(e,this.state.img);this.props.toggleForm()}},this.handleSubmitHelper=(e,t)=>{e.teamName=this.state.groupName,e.className=this.state.courseName,e.totalNumber=this.state.groupSize?parseInt(this.state.groupSize,10):parseInt(this.props.editData.maxSize,10),e.description=this.state.description,e.when2meetURL=this.state.when2meetURL,e.private=this.state.private,e.img=t,e.homeworkHelp=this.state.homeworkHelp,e.examSquad=this.state.examSquad,e.noteExchange=this.state.noteExchange,e.labMates=this.state.labMates,e.projectPartners=this.state.projectPartners,this.props.onSubmit(e,this.props.editData._id)},this.handleDisband=()=>{this.props.onDisband(this.props.editData)},this.state={img:this.props.editData.imgURL,groupName:this.props.editData.teamName,courseName:this.props.editData.className,description:this.props.editData.description,when2meetURL:this.props.editData.when2meetURL,private:!1,groupSize:this.props.editData.maxSize,homeworkHelp:this.props.editData.tags.homeworkHelp,examSquad:this.props.editData.tags.examSquad,noteExchange:this.props.editData.tags.noteExchange,labMates:this.props.editData.tags.labMates,projectPartners:this.props.editData.tags.projectPartners,emptyAlertDisplay:!1,exceedCharDisplay:!1,manyMemberDisplay:!1,myCourses:this.props.courseList,authToken:localStorage.getItem("Authorization")||null}}componentDidUpdate(e){this.props.courseList!==e.courseList&&this.setState(()=>({myCourses:this.props.courseList}))}render(){let e=this.state.myCourses.map(e=>r.a.createElement("option",{value:e,key:e},e));return r.a.createElement("div",{className:"form-popup",id:"edit-form"},r.a.createElement("form",{className:"form-container"},r.a.createElement("h1",null,"Edit Group"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"new-image",className:"font-weight-bold"},"Upload New Image"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",id:"new-image",onChange:this.handleImgURLChange,accept:"image/*"}),r.a.createElement("br",null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"g-name",className:"font-weight-bold"},"Group Name"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"g-name",value:this.state.groupName,onChange:this.handleGroupNameChange}),r.a.createElement("br",null),this.state.emptyAlertDisplay&&r.a.createElement("p",{className:"alert-red alert-edit empty-field"},"This field cannot be empty."),this.state.exceedCharDisplay&&r.a.createElement("p",{className:"alert-red alert-edit 24-char"},"This field cannot exceed 24 characters.")),r.a.createElement("div",{className:"form-group courseContainer",id:"courseListEdit"},r.a.createElement("label",{htmlFor:"c-name",className:"font-weight-bold"},"Course Name"),r.a.createElement("select",{className:"form-control",id:"c-name",value:this.state.courseName,onChange:this.handleCourseNameChange},e)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"g-descr",className:"font-weight-bold"},"Description"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"g-descr",value:this.state.description,onChange:this.handleDescriptionChange}),r.a.createElement("br",null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"g-meet",className:"font-weight-bold"},"When2Meet URL"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"g-meet",value:this.state.when2meetURL,onChange:this.handleMeetChange}),r.a.createElement("br",null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"g-size",className:"font-weight-bold"},"Group Size (2-5)"),r.a.createElement("br",null),r.a.createElement("input",{type:"range",name:"g-size",max:"5",min:"2",id:"g-size",className:"g-size",value:this.state.groupSize?this.state.groupSize:this.props.editData.maxSize,onChange:this.handleGroupSizeChange}),r.a.createElement("output",{className:"ml-3",name:"size-output",id:"size-output"},this.state.groupSize),r.a.createElement("br",null),this.state.manyMemberDisplay&&r.a.createElement("p",{className:"alert-red alert-edit many-member"},"You have ",this.props.editData.members.length," members which exceeds desired group size.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"edit-form-group","aria-labelledby":"goal-text"},r.a.createElement("p",{className:"form-check-label font-weight-bold",id:"goal-text"},"Group Goal"),r.a.createElement("div",{className:"form-check"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:this.state.homeworkHelp,onClick:this.handleHomeworkHelpChange,id:"edit-goal-1",readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"edit-goal-1"},"Homework Help")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",onClick:this.handleExamSquadChange,checked:this.state.examSquad,id:"edit-goal-2",readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"edit-goal-2"},"Exam Squad")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:this.state.noteExchange,id:"edit-goal-3",onClick:this.handleNoteExchangeChange,readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"edit-goal-3"},"Note Exchange")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:this.state.labMates,id:"edit-goal-4",onClick:this.handleLabMatesChange,readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"edit-goal-4"},"Lab Mates")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:this.state.projectPartners,id:"edit-goal-5",onClick:this.handleProjectPartnersChange,readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"edit-goal-5"},"Project Partners")))))),r.a.createElement("label",{htmlFor:"leave"},"Disband the group?"),r.a.createElement("button",{type:"button",className:"btn disband",id:"leave",onClick:this.props.togglePopUpForm},"Disband"),r.a.createElement("div",{className:"formButton"},r.a.createElement("button",{type:"button",id:"submit-edit",className:"btn save",onClick:this.handleSubmit},"Save"),r.a.createElement("button",{type:"button",id:"cancel-edit",className:"btn cancel",onClick:this.props.toggleForm},"Cancel"))))}}var T=function(e){function t(){var e,a;Object(m.a)(this,t);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSumbitConfirm=function(){a.props.confirmFunction(a.props.cardData),a.props.toggleConfirm()},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.confirmDisplay&&r.a.createElement("div",{className:"confirm-popup",id:"p-form"},r.a.createElement("form",{className:"confirm-container"},r.a.createElement("h1",null,"Are you sure?"),r.a.createElement("div",{className:"confirm-button"},r.a.createElement("button",{type:"button",className:"btn-yes",onClick:this.handleSumbitConfirm},"Yes"),r.a.createElement("button",{type:"button",className:"btn-no",onClick:this.props.toggleConfirm},"No")))))}}]),t}(r.a.Component),U=a(62),j=function(e){function t(){var e,a;Object(m.a)(this,t);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).toggleEmptyFeedback=function(){a.props.toggleFeedback(),a.props.feedbackInfo.pop(),a.props.feedbackInfo.pop()},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.feedbackDisplay&&r.a.createElement("div",{className:"feedback-pop"},r.a.createElement("form",{className:"pop-container"},r.a.createElement("p",null,"You have sucessfully ",this.props.feedbackInfo[0]," ",this.props.feedbackInfo[1],"."),r.a.createElement("p",null,"Please see MYGROUPS page to view your current groups."),r.a.createElement("div",{className:"popCancel"},r.a.createElement("button",{type:"button",id:"popCancel",className:"btn cancel",onClick:this.toggleEmptyFeedback},"Close")))))}}]),t}(r.a.Component),O=a(37),L=a.n(O),G=a(66),z=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).showEmpty=function(){a.setState({emptyAlertDisplay:!0})},a.hideEmpty=function(){a.setState({emptyAlertDisplay:!1})},a.deleteCourse=function(){var e=Object(G.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.authToken){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://api.roundtablefinder.com/v1/courses/users",{method:"DELETE",headers:new Headers({Authorization:a.state.authToken,"Content-Type":"application/json"}),body:JSON.stringify({course:t})});case 4:e.sent.status>=300?a.props.errorCallback("Delete course failed. Please retry"):a.props.wsUpdate();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.addOneCourse=function(){var e=Object(G.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}a.showEmpty(),e.next=12;break;case 4:if(a.state.authToken){e.next=7;break}return a.props.errorCallback("You are not authenticated"),e.abrupt("return");case 7:return e.next=9,fetch("https://api.roundtablefinder.com/v1/courses/users",{method:"POST",headers:new Headers({Authorization:a.state.authToken,"Content-Type":"application/json"}),body:JSON.stringify({course:t})});case 9:e.sent.status>=300?a.props.errorCallback("Add course failed. Please retry"):a.props.wsUpdate(),a.hideEmpty();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleNameChange=function(e){a.setState({newName:e.target.value})},a.handleSubmit=function(){a.props.toggleAddCourse(),a.setState({newName:""})},a.state={courses:a.props.courses,newName:"",emptyAlertDisplay:!1,authToken:localStorage.getItem("Authorization")||null},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.courses!==e.courses&&this.setState((function(){return{courses:t.props.courses}}))}},{key:"componentDidMount",value:function(){this.props.getCourseCallback()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=[],a=this.state.courses;return a&&a.forEach((function(a){"Please set up your current courses in profile page."!==a&&t.push(r.a.createElement("div",{className:"course-tag"},a,r.a.createElement(g.a,{icon:U.c,size:"xs",className:"white trash mt-1 mr-2",onClick:function(){return e.deleteCourse(a)}})))})),r.a.createElement("div",null,r.a.createElement("div",{className:"addCoursePopUp"},r.a.createElement("form",{className:"addCourse-form-container"},r.a.createElement("h1",null,"Setup your current courses"),r.a.createElement("label",{htmlFor:"g-name",className:"font-weight-bold"},"Add a course you are taking (EX. INFO340)"),r.a.createElement("br",null),this.state.emptyAlertDisplay&&r.a.createElement("p",{className:"alert-red alert-edit empty-field"},"This field cannot be empty."),r.a.createElement("div",{className:"add-course-input-flex-container"},r.a.createElement("input",{type:"text",id:"addCourseInput",value:this.state.newName,onChange:this.handleNameChange}),r.a.createElement("button",{type:"button",id:"add-course",className:"btn-add",onClick:function(){e.addOneCourse(e.state.newName)}},"Add")),r.a.createElement("div",{className:"course-list row"},t),r.a.createElement("button",{type:"button",id:"add-course-2",className:"btn-add-done",onClick:function(){return e.handleSubmit()}},"Done"))))}}]),t}(r.a.Component);class A extends r.a.Component{constructor(e){super(e),this.toggleMenu=e=>{this.setState({display:e})},this.cancelEdit=()=>{this.setUserProfile()},this.submitEdit=()=>{this.state.authToken?(this.setState({profileChanged:!1}),""===this.state.firstName&&""===this.state.LastName?this.setState({nameErr:!0}):(this.setState({nameErr:!1}),this.submitUpdate())):this.props.errorCallback("You are not authenticated")},this.submitUpdate=async()=>{const e={FirstName:this.state.firstName,LastName:this.state.lastName};""!==this.state.userPhotoFile&&x("UserFolder",this.state.userPhotoFile,this.state.userName,()=>{this.props.setProfilePic()});const t=await fetch("https://api.roundtablefinder.com/v1/users/me",{method:"PATCH",headers:new Headers({Authorization:this.state.authToken,"Content-Type":"application/json"}),body:JSON.stringify(e)});t.status>=300?this.props.errorCallback("error:"+t.status):(this.setUserProfile(),this.toggleMenu("profile"))},this.setAuthToken=e=>{localStorage.setItem("Authorization",e),this.setState({authToken:e})},this.setUser=e=>{this.setState({user:e})},this.setUserProfile=async()=>{if(!this.state.authToken)return void this.props.errorCallback("You are not authenticated.");const e=await fetch(this.props.api.base+this.props.api.handlers.myuser+"me",{method:"GET",headers:new Headers({Authorization:this.state.authToken})});if(e.status>=300)return void this.props.errorCallback("error:"+e.status);const t=await e.json();this.setState({firstName:t.firstName,lastName:t.lastName,email:t.email,url:t.photoURL,userName:t.userName,userPhoto:"https://".concat(w,".s3.").concat(S,".amazonaws.com/UserFolder/").concat(t.userName)})},this.getCourse=async()=>{if(!this.state.authToken)return void this.props.errorCallback("You are not authenticated");const e=await fetch("https://api.roundtablefinder.com/v1/courses/users",{method:"GET",headers:new Headers({Authorization:this.state.authToken})});if(e.status>=300)return void this.props.errorCallback("Get course failed. Please retry");const t=await e.json();null!==t&&this.setState({courses:t.classList})},this.handleFirstNameChange=e=>{this.setState({firstName:e.target.value})},this.handleLastNameChange=e=>{this.setState({lastName:e.target.value})},this.handlePhoto=e=>{this.setState({userPhotoFile:e.target.files[0],userPhoto:URL.createObjectURL(e.target.files[0])})},this.state={display:"profile",firstName:"",lastName:"",email:"",courses:"",nameErr:!1,userPhotoFile:"",userPhoto:"",userName:"",authToken:localStorage.getItem("Authorization")||null}}componentDidMount(){this.props.toggleTwoButtons(!1),this.setUserProfile(),this.getCourse()}componentDidUpdate(e){this.props.courses!==e.courses&&this.setState(()=>({courses:this.props.courses}))}render(){let e=[],t=this.state.courses;return 0!==t.length&&t.forEach(t=>{"Please set up your current courses in profile page."===t&&(t="Please set up your current courses by clicking the plus sign."),e.push(r.a.createElement("div",{key:t,id:"class-name",className:"class-name + ".concat(t)}," ",t," "))}),"profile"===this.state.display?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row my-2"},r.a.createElement("div",{className:"col-lg-8 order-lg-2"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:()=>this.toggleMenu("profile"),className:"nav-link active"},"Profile")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:()=>this.toggleMenu("edit"),className:"nav-link"},"Edit"))),r.a.createElement("div",{className:"tab-content py-4"},r.a.createElement("div",{className:"tab-pane active",id:"profile"},r.a.createElement("h5",{className:"mb-3"},this.state.userName),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"user-profile ml-3"},r.a.createElement("h6",null,"First Name"),r.a.createElement("p",null,this.state.firstName),r.a.createElement("h6",null,"Last Name"),r.a.createElement("p",null,this.state.lastName),r.a.createElement("h6",null,"Email"),r.a.createElement("p",null,this.state.email),r.a.createElement("h6",null,"Current Courses"),r.a.createElement("div",{className:"my-courses"},e),r.a.createElement(g.a,{icon:U.a,size:"lg",className:"mx-3 mt-1",onClick:this.props.toggleAddCourse})))))),r.a.createElement("div",{className:"col-lg-4 order-lg-1"},r.a.createElement("img",{src:this.state.userPhoto,className:"mx-auto img-fluid img-circle d-block user-img",alt:"avatar"})))):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row my-2"},r.a.createElement("div",{className:"col-lg-8 order-lg-2"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:()=>this.toggleMenu("profile"),className:"nav-link"},"Profile")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:()=>this.toggleMenu("edit"),className:"nav-link active"},"Edit"))),r.a.createElement("div",{className:"tab-content py-4"},r.a.createElement("div",{className:"tab-pane active",id:"edit"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"First Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:this.state.firstName,onChange:this.handleFirstNameChange})),this.state.nameErr&&r.a.createElement("p",{className:"name-err"},"Name cannot be empty!")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Last Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:this.state.lastName,onChange:this.handleLastNameChange})),this.state.nameErr&&r.a.createElement("p",{className:"name-err"},"Name cannot be empty!")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"reset",className:"btn btn-secondary mr-3",value:"Cancel",onClick:this.cancelEdit}),r.a.createElement("input",{type:"button",className:"btn btn-primary",value:"Save Changes",onClick:this.submitEdit}))))))),r.a.createElement("div",{className:"col-lg-4 order-lg-1"},r.a.createElement("img",{src:this.state.userPhoto,className:"mx-auto img-fluid img-circle d-block user-img",alt:"avatar"}),r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",accept:"image/*",className:"custom-file-input",onChange:this.handlePhoto}),r.a.createElement("label",{className:"custom-file-label"},"Upload a different photo")))))}}var M=0,I=1,H=2,R=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleDetailClick=function(){a.setState({shouldRedirect:!0})},a.toggleConfirm=function(){a.setState((function(e){return{confirmPopUp:!e.confirmPopUp}}))},a.handleManageGroup=function(){a.props.feedbackDisplay&&a.reportGroupStatus()===M?(a.props.toggleFeedback(),a.props.feedbackInfo.pop(),a.props.feedbackInfo.pop(),a.props.feedbackInfo.push("joined"),a.props.feedbackInfo.push(a.props.cardData.teamName),a.props.toggleFeedback()):a.reportGroupStatus()===M&&(a.props.feedbackInfo.push("joined"),a.props.feedbackInfo.push(a.props.cardData.teamName),a.props.toggleFeedback()),a.reportGroupStatus()===H?a.props.editFunction(a.props.cardData):a.reportGroupStatus()===I?a.toggleConfirm():a.props.switchFunction(a.props.cardData),a.props.fetch()},a.state={confirmPopUp:!1,shouldRedirect:!1},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"reportGroupStatus",value:function(){var e=this.props.cardData.members;return this.props.cardData.creator.userID===this.props.user.id?H:e.includes(this.props.user.id)?I:M}},{key:"getMemberIcons",value:function(){for(var e=this,t=[],a=0;a<this.props.cardData.maxSize;a++)a<this.props.cardData.members.length?t.push(!0):t.push(!1);var s=[];return t.forEach((function(t,a){var r=e.getMemberIcon(t,a);s.push(r)})),r.a.createElement("div",{className:"team-viz"},s)}},{key:"getMemberIcon",value:function(e,t){return e?r.a.createElement("img",{src:"img/mF.png",alt:"member icon, occupied","aria-hidden":"true",key:t}):r.a.createElement("img",{src:"img/mE.png",alt:"member icon, occupied","aria-hidden":"true",key:t})}},{key:"returnStatusString",value:function(){return this.reportGroupStatus()===M?"Join":this.reportGroupStatus()===I?"Leave":"Edit"}},{key:"groupLeaderCrown",value:function(){return this.reportGroupStatus()===H?r.a.createElement("img",{className:"leader",src:"img/crown.svg",alt:"You are leader"}):""}},{key:"displayStyleCheck",value:function(){return this.props.cardData.members.length===this.props.cardData.maxSize&&this.reportGroupStatus()===M?{display:"none"}:{display:"inline-block"}}},{key:"render",value:function(){return this.state.shouldRedirect?r.a.createElement(l.a,{to:"/group/"+this.props.cardData._id}):r.a.createElement("div",null,r.a.createElement("div",{className:"flex-card"},r.a.createElement("img",{id:"g-img",src:this.props.cardData.imgURL,alt:"Group "+this.props.cardData.teamName,onClick:this.handleDetailClick,"aria-haspopup":"true"}),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-text"},r.a.createElement("div",{className:"group-name"}," ",this.props.cardData.teamName," "),this.groupLeaderCrown(),r.a.createElement("div",{id:"class-name",className:"class-name"}," ",this.props.cardData.className," ")),this.getMemberIcons(),r.a.createElement("div",{className:"group-info"},r.a.createElement("div",{className:"group-size"},"Group of ",this.props.cardData.maxSize,r.a.createElement("button",{className:this.returnStatusString().toLowerCase(),style:this.displayStyleCheck(),onClick:this.handleManageGroup}," ",this.returnStatusString()," ")),r.a.createElement("div",{className:"looking-for"}," Looking for ",this.props.cardData.maxSize-this.props.cardData.members.length," more")))),r.a.createElement(T,{confirmDisplay:this.state.confirmPopUp,confirmFunction:this.props.confirmFunction,cardData:this.props.cardData,toggleConfirm:this.toggleConfirm}))}}]),t}(r.a.Component),q=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleGroupChange=function(e){var t=e.target.value;a.setState({group:t})},a.handleCourseChange=function(e){var t=e.target.value;a.setState({course:t})},a.handleHomeworkHelpChange=function(){a.setState((function(e){return{homeworkHelp:!e.homeworkHelp}}))},a.handleExamSquadChange=function(){a.setState((function(e){return{examSquad:!e.examSquad}}))},a.handleNoteExchangeChange=function(){a.setState((function(e){return{noteExchange:!e.noteExchange}}))},a.handleLabMatesChange=function(){a.setState((function(e){return{labMates:!e.labMates}}))},a.handleProjectPartnersChange=function(){a.setState((function(e){return{projectPartners:!e.projectPartners}}))},a.handleFullGroupChange=function(){a.setState((function(e){return{fullGroup:!e.fullGroup}}))},a.handleGroupSizeOutput=function(e){e.target.value=a.state.groupSize},a.handleSubmitRefine=function(){a.setState({fetched:!0,cardList:a.handleFilteringHelper()})},a.handleReset=function(){a.setState((function(){return{group:"",course:"",homeworkHelp:!1,examSquad:!1,noteExchange:!1,labMates:!1,projectPartners:!1,cardList:a.props.renderedCards,fullGroup:!1,currentCard:null,applied:!1}}))},a.handleFilteringHelper=function(){var e=a.props.renderedCards;return""!==a.state.group&&(e=e.filter((function(e){return e.teamName.toLowerCase().includes(a.state.group.toLowerCase())}))),""!==a.state.course&&(e=e.filter((function(e){return e.className.toLowerCase().includes(a.state.course.toLowerCase())}))),a.state.homeworkHelp&&(e=e.filter((function(e){return e.tags.homeworkHelp}))),a.state.examSquad&&(e=e.filter((function(e){return e.tags.examSquad}))),a.state.noteExchange&&(e=e.filter((function(e){return e.tags.noteExchange}))),a.state.labMates&&(e=e.filter((function(e){return e.tags.labMates}))),a.state.projectPartners&&(e=e.filter((function(e){return e.tags.projectPartners}))),a.state.fullGroup&&(e=e.filter((function(e){return e.members.length!==e.totalNumber}))),e===a.props.renderedCards?a.setState((function(){return{applied:!1}})):a.setState((function(){return{applied:!0}})),e},a.confirmLeave=function(){var e=Object(G.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.authToken){e.next=3;break}return a.props.errorCallback("You are not authenticated."),e.abrupt("return");case 3:return e.next=5,fetch("https://api.roundtablefinder.com/v1/groups/"+t._id+"/members",{method:"DELETE",headers:new Headers({Authorization:a.state.authToken})});case 5:if(!(e.sent.status>=300)){e.next=11;break}return a.props.errorCallback("leaving group failed. Please retry."),e.abrupt("return");case 11:a.props.wsUpdate();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.joinGroup=function(){var e=Object(G.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.authToken){e.next=3;break}return a.props.errorCallback("You are not authenticated."),e.abrupt("return");case 3:return e.next=5,fetch("https://api.roundtablefinder.com/v1/groups/"+t._id+"/members",{method:"POST",headers:new Headers({Authorization:a.state.authToken,"Content-Type":"application/json"}),body:JSON.stringify({id:a.props.user.id})});case 5:if(!(e.sent.status>=300)){e.next=11;break}return a.props.errorCallback("Joining group failed. Please retry."),e.abrupt("return");case 11:a.props.wsUpdate();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.editGroup=function(e){a.props.passEditCallback(e)},a.state={group:"",course:"",homeworkHelp:!1,examSquad:!1,noteExchange:!1,labMates:!1,projectPartners:!1,cardList:a.props.renderedCards,fullGroup:!1,fetched:!1,applied:!1,authToken:localStorage.getItem("Authorization")||null},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.renderedCards!==e.renderedCards&&this.setState((function(){return{cardList:t.props.renderedCards}}))}},{key:"toggleTitle",value:function(){return r.a.createElement("p",null,"test")}},{key:"render",value:function(){var e=this,t=[],a=null;return this.state.cardList&&(t=this.state.cardList.map((function(t){return r.a.createElement(R,{cardData:t,switchFunction:e.joinGroup,editFunction:e.editGroup,fetch:e.props.fetch,toggleFeedback:e.props.toggleFeedback,feedbackInfo:e.props.feedbackInfo,feedbackDisplay:e.props.feedbackDisplay,key:t._id,confirmFunction:e.confirmLeave,user:e.props.user,toggleEditForm:e.props.toggleEditForm})}))),a=0===this.state.cardList.length?r.a.createElement("div",null,r.a.createElement("h4",{className:"text-center"},"So Empty...")):r.a.createElement("div",{className:"flex-cards-container"},t),r.a.createElement("div",{className:"more-options row"},this.props.filterDisplay&&r.a.createElement("div",{className:"col-md-6 col-xl-3 filter-form"},r.a.createElement("div",{className:"side-bar"},r.a.createElement("form",{className:"px-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-check-label",htmlFor:"form-check-input-group"},"Group Name"),r.a.createElement("div",null,r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Example: Geek",id:"form-check-input-group",onChange:this.handleGroupChange,value:this.state.group}))),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-check-label",htmlFor:"form-check-input-course"},"Course"),r.a.createElement("div",null,r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Example: Info 340",id:"form-check-input-course",onChange:this.handleCourseChange,value:this.state.course}))),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("div",{className:"form-group","aria-labelledby":"goal-text"},r.a.createElement("p",{className:"form-check-label",id:"goal-text"},"Group Goal"),r.a.createElement("div",{className:"form-check"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"option1",id:"form-check-input-goal-1",onClick:this.handleHomeworkHelpChange,checked:this.state.homeworkHelp,readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"form-check-input-goal-1"},"Homework Help")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"option2",id:"form-check-input-goal-2",onClick:this.handleExamSquadChange,checked:this.state.examSquad,readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"form-check-input-goal-2"},"Exam Squad")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"option3",id:"form-check-input-goal-3",onClick:this.handleNoteExchangeChange,checked:this.state.noteExchange,readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"form-check-input-goal-3"},"Note Exchange")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"option4",id:"form-check-input-goal-4",onClick:this.handleLabMatesChange,checked:this.state.labMates,readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"form-check-input-goal-4"},"Lab Mates")),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"option5",id:"form-check-input-goal-5",onClick:this.handleProjectPartnersChange,checked:this.state.projectPartners,readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"form-check-input-goal-5"},"Project Partners"))))),"Check Out These Amazing Groups!"===this.props.h1Title&&r.a.createElement("div",null,r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("div",{className:"form-group","aria-labelledby":"dont-display-full-text"},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"form-check-input-full",onClick:this.handleFullGroupChange,checked:this.state.fullGroup,readOnly:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"form-check-input-full"},"Don't display full group")))),r.a.createElement("button",{className:"btn btn-primary search-button mr-3",type:"button",onClick:this.handleSubmitRefine},"Refine Result"),r.a.createElement("button",{className:"btn btn-secondary search-button",type:"button",onClick:this.handleReset},"Reset"),this.state.applied&&r.a.createElement("p",{className:"applied-filter ml-2"},"Applied")))),r.a.createElement("section",{className:"course-cards"},r.a.createElement("h1",{className:"text-center title"},this.props.h1Title),r.a.createElement("p",{className:"text-center"},"Click on group images to check details."),a))}}]),t}(r.a.Component),B=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.toggleTwoButtons(!0)}},{key:"render",value:function(){var e=this,t=[];return this.props.cards&&this.props.user&&this.props.cards.forEach((function(a){var s=!0,r=!1,o=void 0;try{for(var n,l=a.members[Symbol.iterator]();!(s=(n=l.next()).done);s=!0){if(n.value===e.props.user.id){t.push(a);break}}}catch(i){r=!0,o=i}finally{try{s||null==l.return||l.return()}finally{if(r)throw o}}})),r.a.createElement("div",null,r.a.createElement(q,{wsUpdate:this.props.wsUpdate,filterDisplay:this.props.filterDisplay,toggleFilter:this.props.toggleFilter,cards:this.props.cards,renderedCards:t,fetch:this.props.fetch,updateCallback:this.props.updateCallback,toggleFeedback:this.props.toggleFeedback,feedbackInfo:this.props.feedbackInfo,passEditCallback:this.props.passEditCallback,feedbackDisplay:this.props.feedbackDisplay,user:this.props.user,h1Title:"My Current Groups",errorCallback:this.props.errorCallback,loading:this.props.loading}))}}]),t}(r.a.Component),Y=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.toggleTwoButtons(!0)}},{key:"render",value:function(){var e=this,t=[];return this.props.cards&&this.props.user&&this.props.cards.forEach((function(a){var s=!1,r=!0,o=!1,n=void 0;try{for(var l,i=a.members[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){l.value===e.props.user.id&&(s=!0)}}catch(c){o=!0,n=c}finally{try{r||null==i.return||i.return()}finally{if(o)throw n}}s||t.push(a)})),r.a.createElement("div",null,r.a.createElement(q,{wsUpdate:this.props.wsUpdate,filterDisplay:this.props.filterDisplay,toggleFilter:this.props.toggleFilter,cards:this.props.cards,renderedCards:t,fetch:this.props.fetch,updateCallback:this.props.updateCallback,toggleFeedback:this.props.toggleFeedback,feedbackInfo:this.props.feedbackInfo,passEditCallback:this.props.passEditCallback,feedbackDisplay:this.props.feedbackDisplay,user:this.props.user,h1Title:"Check Out These Amazing Groups!",errorCallback:this.props.errorCallback}))}}]),t}(r.a.Component),J={base:"https://api.roundtablefinder.com",testbase:"https://localhost:4000",handlers:{users:"/v1/users",myuser:"/v1/users/",sessions:"/v1/sessions",sessionsMine:"/v1/sessions/mine",courses:"/v1/courses/users",groups:"/v1/groups",thisgroup:"/v1/groups/"}};const W="homeworkHelp",_="examSquad",V="noteExchange",K="labMates",X="projectPartners";class $ extends r.a.Component{constructor(e){super(e),this.handleDetailClick=()=>{this.setState({shouldRedirect:!0})},this.getMembersInfo=async(e,t)=>{this.state.authToken?e.forEach(async e=>{const a=await fetch(J.base+J.handlers.myuser+e,{method:"GET",headers:new Headers({Authorization:this.state.authToken})});if(a.status>=300)return this.toggleOnError("Authentication failed. Please relog."),this.setAuthToken(""),void this.setUser(null);const s=await a.json();e!==t?this.setState(e=>{let t=e.userDataArray;return t.push(s),{userDataArray:t}}):this.setState({leader:s})}):this.props.errorCallback("no auth")},this.buildUserDataArray=e=>{let t=this.state.userDataArray;t.push(e),this.setState({userDataArray:t})},this.getCurrentUser=async()=>{if(!this.state.authToken)return void this.props.errorCallback("no auth token found, aborting");const e=await fetch(J.base+J.handlers.myuser+"me",{method:"GET",headers:new Headers({Authorization:this.state.authToken})});if(e.status>=300)return this.toggleOnError("Authentication failed. Please relog."),this.setAuthToken(""),void this.setUser(null);const t=await e.json();this.setState({user:t})},this.state={user:null,userDataArray:[],leader:{},card:{},teamName:"",shouldRedirect:!1,authToken:localStorage.getItem("Authorization")||null}}componentDidMount(){this.props.toggleTwoButtons(!1);let e=this.props.match.params.groupID;this.getCurrentUser(),fetch(J.base+J.handlers.thisgroup+e).then(e=>e.json()).then(e=>{if(e){let t=e.members,a=e.creator.userID,s=e.teamName;t&&this.getMembersInfo(t,a),s&&this.setState(()=>({card:e,teamName:e.teamName}))}},e=>{e&&this.props.errorCallback(e)})}render(){if(this.state.shouldRedirect&&this.props.user)return this.state.card.members.includes(this.props.user.id)?r.a.createElement(l.a,{to:"/mygroup"}):r.a.createElement(l.a,{to:"/home"});let e=this.state.card,t=this.state.userDataArray,a=null,s=null;if(a=t.map(e=>{return this.state.card.members.includes(this.state.user.id)?r.a.createElement("div",{key:e.id},r.a.createElement("div",{className:"memberRow"},r.a.createElement("img",{className:"avatar",src:"https://".concat(w,".s3.").concat(S,".amazonaws.com/UserFolder/").concat(e.userName),alt:"User Profile"}),r.a.createElement("p",{className:"memberInfos"},e.firstName+"\t"+e.lastName),r.a.createElement("a",{className:"sendEmailButton",href:"mailto: "+e.email},"Email"))):r.a.createElement("div",{key:e.id},r.a.createElement("div",{className:"memberRow"},r.a.createElement("img",{className:"avatar",src:"https://".concat(w,".s3.").concat(S,".amazonaws.com/UserFolder/").concat(e.userName),alt:"User Profile"}),r.a.createElement("p",{className:"memberInfos"},e.firstName+"\t"+e.lastName)))}),e){let t=e.tags;return t&&(s=Object.keys(t).map(e=>!0===t[e]?(e===W?e="Homework Help":e===_?e="Exam Squad":e===V?e="Note Exchange":e===K?e="Lab Mates":e===X&&(e="Project Partners"),r.a.createElement("div",{key:e},r.a.createElement("div",{className:"goalTag"},e))):null)),r.a.createElement("section",null,r.a.createElement("div",{className:"detailsContainer"},r.a.createElement("h1",{className:"detailsTitle"},e.teamName),r.a.createElement("button",{className:"detailsCloseButton",onClick:this.handleDetailClick},"Close"),r.a.createElement("div",{className:"class-name-details"}," ",e.className," "),r.a.createElement("div",{className:"lookingFor"}," Looking for ",e.members?e.maxSize-e.members.length:"fetching"," more"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("p",{className:"membersTitle"},"Group Description:"),r.a.createElement("div",{className:"detailsContent"},this.state.card.description?this.state.card.description:r.a.createElement("p",null,"None"))),r.a.createElement("div",null,r.a.createElement("p",{className:"membersTitle"},"Members:")),r.a.createElement("div",{className:"memberList"},"undefined"!==typeof this.state.leader&&r.a.createElement("div",null,r.a.createElement("div",{key:this.state.leader.id},r.a.createElement("div",{className:"memberRow"},r.a.createElement("img",{className:"avatar",src:"https://".concat(w,".s3.").concat(S,".amazonaws.com/UserFolder/").concat(this.state.leader.userName),alt:"User Profile"}),r.a.createElement("img",{className:"detailsLeader",src:"/img/crown.svg",alt:"You are leader"}),r.a.createElement("p",{className:"leaderInfos"},this.state.leader.firstName+"\t"+this.state.leader.lastName),r.a.createElement("a",{className:"sendEmailButton",href:"mailto: "+this.state.leader.email}," Email"))),a)),r.a.createElement("div",null,r.a.createElement("p",{className:"membersTitle"},"Group Goal:"),r.a.createElement("div",{className:"goalTagsContainer"},s||r.a.createElement("p",null,"None"))),r.a.createElement("div",null,r.a.createElement("p",{className:"membersTitle"},"When2Meet URL:"),r.a.createElement("div",{className:"detailsContent"},this.state.card.when2meetURL?this.state.card.when2meetURL:r.a.createElement("p",null,"None")))))}}}var Q=a(126);class Z extends r.a.Component{constructor(...e){super(...e),this.formSchema={title:"SIGN UP",description:"Enter basic information to create an account",type:"object",required:["email","password","passwordConf","userName","firstName","lastName"],properties:{email:{type:"string",title:"Email"},password:{type:"string",title:"Password"},passwordConf:{type:"string",title:"Confirm Password"},userName:{type:"string",title:"Username"},firstName:{type:"string",title:"First name"},lastName:{type:"string",title:"Last name"}}},this.UIschema={email:{"ui:format":"email"},firstName:{"ui:autofocus":!0,"ui:emptyValue":"","ui:autocomplete":"family-name"},lastName:{"ui:emptyValue":"","ui:autocomplete":"given-name"},password:{"ui:widget":"password","ui:help":"Hint: Make it strong!"},passwordConf:{"ui:widget":"password","ui:help":"Make sure the passwords match... "}},this.onSubmit=async({formData:e})=>{const t=await fetch(J.base+J.handlers.users,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(t.status>=300)return void this.props.errorCallback("Sign up unsuccessful. Please retry.");const a=await t.json();this.props.setUser(a);const s=await fetch("https://roundtablefinder.s3-us-west-1.amazonaws.com/UserFolder/husky.png"),r=await s.blob();x("UserFolder",r,a.userName,()=>{this.props.setProfilePic(),this.props.setAuthToken(t.headers.get("Authorization"))})}}render(){return r.a.createElement(Q.a,{schema:this.formSchema,UIschema:this.UIschema,onSubmit:this.onSubmit})}}class ee extends r.a.Component{constructor(...e){super(...e),this.formSchema={title:"LOG IN",description:"Log in to your exisitng account",type:"object",required:["email","password"],properties:{email:{type:"string",title:"Email"},password:{type:"string",title:"Password"}}},this.UIschema={email:{"ui:format":"email"},password:{"ui:widget":"password"}},this.onSubmit=async({formData:e})=>{const t=await fetch(J.base+J.handlers.sessions,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(t.status>=300)return void this.props.errorCallback("Log in unsuccessful. Please retry.");const a=await t.json();this.props.setUser(a),this.props.setAuthToken(t.headers.get("Authorization")),this.props.fetch()}}render(){return r.a.createElement(Q.a,{schema:this.formSchema,UIschema:this.UIschema,onSubmit:this.onSubmit})}}const te=new WebSocket("wss://api.roundtablefinder.com/websocket");class ae extends r.a.Component{constructor(e){super(e),this.getCurrentUser=async()=>{if(!this.state.authToken)return void this.toggleOnError("You are not authenticated.");const e=await fetch(J.base+J.handlers.myuser+"me",{method:"GET",headers:new Headers({Authorization:this.state.authToken})});if(e.status>=300)return this.toggleOnError("Authentication failed. Please relog."),this.setAuthToken(""),void this.setUser(null);const t=await e.json();this.setState({user:t,userPhoto:"https://".concat(w,".s3.").concat(S,".amazonaws.com/UserFolder/").concat(t.userName)})},this.getCurrentGroups=async()=>{if(!this.state.authToken)return;const e=await fetch(J.base+J.handlers.groups,{method:"GET",headers:new Headers({Authorization:this.state.authToken})});if(e.status>=300)return void this.toggleOnError("Retrieving group info failed. Please retry.");const t=await e.json();this.setState({myGroups:t})},this.valueChange=()=>{te.send("update happened")},this.fetch=async()=>{this.setSpinnerOnDisplay(),this.getCurrentUser(),this.getCurrentGroups(),this.getCourse(),this.setSpinnerOffDisplay()},this.getCourse=async()=>{if(!this.state.authToken)return void this.toggleOnError("You are not authenticated.");const e=await fetch("https://api.roundtablefinder.com/v1/courses/users",{method:"GET",headers:new Headers({Authorization:this.state.authToken})});if(e.status>=300)return void this.toggleOnError("Get course failed. Please retry");const t=await e.json();null!==t?this.setState({myCourses:t.classList}):this.setState({myCourses:["Please set up your current courses in profile page."]})},this.submitCreateForm=async e=>{if(!this.state.authToken)return void this.toggleOnError("You are not authenticated.");const t=await fetch(J.base+J.handlers.groups,{method:"POST",headers:new Headers({Authorization:this.state.authToken,"Content-Type":"application/json"}),body:JSON.stringify(e)});t.status>=300?this.toggleOnError(t.body):this.valueChange()},this.submitEditForm=async(e,t)=>{const a=await fetch(J.base+J.handlers.groups+"/"+t,{method:"PATCH",headers:new Headers({Authorization:this.state.authToken,"Content-Type":"application/json"}),body:JSON.stringify(e)});a.status>=300?this.toggleOnError(a.body):this.valueChange()},this.setSpinnerOnDisplay=()=>{this.setState(()=>({spinnerDisplay:!0}))},this.setSpinnerOffDisplay=()=>{this.setState(e=>({spinnerDisplay:!1}))},this.setAuthToken=e=>{localStorage.setItem("Authorization",e),this.setState(()=>({authToken:e}))},this.setUser=e=>{this.setState(()=>({user:e}))},this.setProfilePic=()=>{this.setState(e=>({profileChanged:!e.profileChanged}))},this.toggleFilter=()=>{this.setState(e=>({filterDisplay:!e.filterDisplay}))},this.toggleCreateForm=()=>{this.setState(e=>({createDisplay:!e.createDisplay,coverDisplay:!e.coverDisplay}))},this.toggleEditForm=()=>{this.setState(e=>({editDisplay:!e.editDisplay,coverDisplay:!e.coverDisplay}))},this.toggleFeedback=()=>{this.setState(e=>({feedbackDisplay:!e.feedbackDisplay}))},this.togglePageTitle=e=>{this.setState(()=>({currentPage:e}))},this.passEdit=e=>{this.setState({tempEditData:e,editDisplay:!0,coverDisplay:!0})},this.disbandGroup=async e=>{this.toggleEditForm();const t=await fetch(J.base+J.handlers.groups+"/"+e._id,{method:"DELETE",headers:new Headers({Authorization:this.state.authToken})});t.status>=300?this.toggleOnError(t.body):this.valueChange()},this.togglePopUp=()=>{this.setState(e=>({popUpDisplay:!e.popUpDisplay}))},this.toggleAddCourse=()=>{this.setState(e=>({addCourseDisplay:!e.addCourseDisplay,coverDisplay:!e.coverDisplay}))},this.toggleTwoButtons=e=>{this.setState({twoButtonDisplay:e})},this.toggleOnError=e=>{e&&this.setState({errorDisplay:!0,errorMessage:e.message})},this.state={user:null,spinnerDisplay:!1,myGroups:[],myCourses:[],currentCourses:"",currentPage:"",filterDisplay:!1,createDisplay:!1,editDisplay:!1,errorDisplay:!1,tempEditData:{},feedbackDisplay:!1,feedbackInfo:[],popUpDisplay:!1,addCourseDisplay:!1,twoButtonDisplay:!0,coverDisplay:!1,groupCount:0,errorMessage:"",userPhoto:"",authToken:localStorage.getItem("Authorization")||null,profileChanged:!1}}componentDidMount(){this.fetch(),te.onopen=()=>{console.log("Websocket Client Connected")},te.onmessage=e=>{this.fetch()}}render(){let e=null;return e=this.state.authToken&&"null"!==this.state.authToken?r.a.createElement("div",null,r.a.createElement(c,{userPhoto:this.state.userPhoto,page:this.state.currentPage,togglePage:this.togglePageTitle,user:this.state.user,errorCallback:this.toggleOnError,setAuthToken:this.setAuthToken,profileChanged:this.state.profileChanged}),this.state.coverDisplay&&r.a.createElement("div",{className:"grey-cover"}),r.a.createElement("main",null,this.state.twoButtonDisplay&&r.a.createElement("div",null,r.a.createElement("button",{id:"options",onClick:this.toggleFilter},"Show Filter"),r.a.createElement("button",{id:"create",onClick:this.toggleCreateForm},"Create A Group")),r.a.createElement(P,{createDisplay:this.state.createDisplay,toggleForm:this.toggleCreateForm,courseList:this.state.myCourses,onSubmit:this.submitCreateForm,groupList:this.state.myGroups,toggleFeedback:this.toggleFeedback,feedbackInfo:this.state.feedbackInfo,feedbackDisplay:this.state.feedbackDisplay,user:this.state.user,errorCallback:this.toggleOnError}),this.state.editDisplay&&r.a.createElement(F,{editData:this.state.tempEditData,editDisplay:this.state.editDisplay,toggleForm:this.toggleEditForm,courseList:this.state.myCourses,onSubmit:this.submitEditForm,groupList:this.state.myGroups,onDisband:this.disbandGroup,togglePopUpForm:this.togglePopUp,user:this.state.user,errorCallback:this.toggleOnError}),this.state.popUpDisplay&&r.a.createElement(T,{toggleConfirm:this.togglePopUp,confirmFunction:this.disbandGroup,cardData:this.state.tempEditData,confirmDisplay:this.state.popUpDisplay}),this.state.addCourseDisplay&&r.a.createElement(z,{toggleAddCourse:this.toggleAddCourse,courses:this.state.myCourses,user:this.state.user,getCourseCallback:this.getCourse,errorCallback:this.toggleOnError,wsUpdate:this.valueChange}),r.a.createElement(j,{feedbackDisplay:this.state.feedbackDisplay,toggleFeedback:this.toggleFeedback,feedbackInfo:this.state.feedbackInfo}),this.state.errorDisplay&&r.a.createElement("div",{className:"popup"},r.a.createElement("p",null,this.state.errorMessage+" Check your connection and refresh webpage.")),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/myprofile",render:e=>r.a.createElement(A,Object.assign({},e,{user:this.state.user,toggleAddCourse:this.toggleAddCourse,toggleTwoButtons:this.toggleTwoButtons,errorCallback:this.toggleOnError,authToken:this.state.authToken,api:J,getCurrentUser:this.getCurrentUser,courses:this.state.myCourses,setProfilePic:this.setProfilePic}))}),r.a.createElement(l.b,{exact:!0,path:"/mygroup",render:e=>r.a.createElement(B,Object.assign({},e,{cards:this.state.myGroups,loading:this.state.spinnerDisplay,wsUpdate:this.valueChange,updateCallback:this.updateAppState,toggleFeedback:this.toggleFeedback,user:this.state.user,toggleEditForm:this.toggleEditForm,feedbackInfo:this.state.feedbackInfo,passEditCallback:this.passEdit,toggleTwoButtons:this.toggleTwoButtons,fetch:this.fetch,feedbackDisplay:this.state.feedbackDisplay,filterDisplay:this.state.filterDisplay,toggleFilter:this.toggleFilter,errorCallback:this.toggleOnError}))}),r.a.createElement(l.b,{exact:!0,path:"/home",render:e=>r.a.createElement(Y,Object.assign({},e,{wsUpdate:this.valueChange,cards:this.state.myGroups,loading:this.state.spinnerDisplay,updateCallback:this.updateAppState,toggleFeedback:this.toggleFeedback,user:this.state.user,fetch:this.fetch,feedbackInfo:this.state.feedbackInfo,passEditCallback:this.passEdit,toggleTwoButtons:this.toggleTwoButtons,feedbackDisplay:this.state.feedbackDisplay,filterDisplay:this.state.filterDisplay,toggleFilter:this.toggleFilter,errorCallback:this.toggleOnError}))}),r.a.createElement(l.b,{path:"/group/:groupID",render:e=>r.a.createElement($,Object.assign({},e,{wsUpdate:this.valueChange,errorCallback:this.toggleOnError,toggleTwoButtons:this.toggleTwoButtons,user:this.state.user}))}),r.a.createElement(l.a,{to:"/home"})),this.state.spinnerDisplay&&r.a.createElement("div",{className:"text-center"},r.a.createElement(g.a,{icon:U.b,size:"lg",spin:!0}))),r.a.createElement(b,null)):r.a.createElement("div",null,r.a.createElement("main",null,r.a.createElement("img",{className:"loginLogo",src:"img/loginLogo.png",alt:"Round Table Logo"}),r.a.createElement("div",{className:"loginBG"},r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-form text-center container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col"},r.a.createElement(Z,{setAuthToken:this.setAuthToken,setUser:this.setUser,errorCallback:this.toggleOnError,fetch:this.fetch,setProfilePic:this.setProfilePic})),r.a.createElement("div",{className:"col"},r.a.createElement(ee,{setAuthToken:this.setAuthToken,setUser:this.setUser,errorCallback:this.toggleOnError,fetch:this.fetch}))))))))}}a(587),a(588),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(r.a.createElement(i.a,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[304,1,2]]]);
//# sourceMappingURL=main.388bac2d.chunk.js.map